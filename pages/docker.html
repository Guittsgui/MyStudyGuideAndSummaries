<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Front End.</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>

            <a href="../index.html">Home</a>
            <div class="title">
                <h1>Docker Resume Guide</h1>
            </div>
            <div class="nav">
                <ul>   
                    <li><a href="#img"> ImagemDocker</a></li>   
                </ul>
            </div>

        <div class="base">
            <h2 id="docker"> Docker </h2>
            <h2> O que é o Docker ?</h2>
            <p> Docker basicamente é uma plataforma que foi criada para <strong>Construir, Rodar e principalmente Transferir </strong> aplicações do nosso ambiente de teste para o ambiente de produção. O docker não nasceu pelo simples fato de que alguém quis criar, e sim pelo fato de que é muito comum nos depararmos com a seguinte situação: Estamos construindo uma aplicação em nossa maquina, desenvolvendo o front, a api, o banco, e quando vamos coloca-la no ar, ela simplesmente quebra e não funciona. E <strong>porque isso acontece? </strong> Quando temos uma aplicação em nossa máquina temos uma quantidade X de arquivos, e não necessáriamente quando enviamos para produção todos esses arquivos irão. Quando temos uma aplicação em nossa máquina, temos determinadas versões instaladas ex: Node 10.0.0, e quando enviamos para produção pode não ser a mesma versão, fazendo com que quebre. As vezes as configurações do nosso ambiente local sejam completamente diferente do ambiente de produção, fazendo com que quebre. É deste ponto que veio a ideia de <strong>criar o Docker</strong>, será que não conseguiriamos criar um ambiente virtual dentro da nossa máquina para que possamos ao invés de subir apenas nossa aplicação subir o ambiente inteiro ? Pegar nossa aplicação e coloca-la dentro de uma caixa, um <strong>container</strong> com tudo que nossa aplicação necessita para rodar sem depender de nada do servidor ? </p>
            <p> Podemos colocar nossa aplicação para rodar na nossa própria máquina, dentro de um Container, e depois realizamos o upload desse mesmo container para um servidor. Ainda por cima com uma outra vantagem de que tanto o usuário quanto o servidor podem utilizar qualquer SO. </p>
            <img src="../dockerPhotos/d1.png" alt="">
            <h3> Container x VM </h3><br>
            <p> Quando vemos pela primeira vez, podemos achar que maquinas virtuais e containers sao bem parecidos, mas qual suas diferencas? Para apontar as diferencas, vamos apontar primeiro o que sao as VM. Quando temos um servidor, possuimos um hardware no servidor, no qual instalamos um hypervisor no topo do hardware, que quando o instalamos ele nos dá a possibilidade de no topo instalarmos outros sistemas operacionais. Porém um desvantagem da VM é que eles são limitados em recursos. Por exemplo, se o hardware(servidor) possui 32gb de Ram, cada máquina virtual abaixo trabalhará utilizando 8gb, como ilustrado na imagem: <small>Em vermelho temos nosso ambiente/enviroment para rodar nossas aplicações.</small> </p>
            <img src="../dockerPhotos/d2.png" alt="">
            <p> Já nos <strong>Containers</strong> nós não precisamos instalar os hypervisiors, vem direto o sistema operacional, que geralmente é rodado em Linux, eem seguida vem direto nossos containers com nosso ambiente/enviroment.  </p>
            <img src="../dockerPhotos/d3.png" alt="">
            <p> Mesmo observando as imagens, as vezes fica complexo de entender a diferença. Deixando mais explícito, a maior diferença é que nos containers temos apenas um sistema operacional, que fica concentrando com os recursos apenas para ele, nos possibilitando rodar nossos containers de forma isolada. Ou seja, o consumo de recursos se torna muito mais eficiente. Sem contar que através do docker conseguimos inciar uma aplicação de forma muito mais rápida. </p><br>
            <h3>Testando o Docker</h3>
            <p> A partir do terminal podemos utilizar o comando <strong>docker version</strong> e caso ele responda, saberemos que o docker está funcionando. </p><br>
            <h3>Como o Docker Funciona?</h3>
            <p> Imagine que tenhamos uma apçicação com nosso Front, nosso Back, e nosso Banco de dados e que desejemos <strong>Dockerizar</strong> essa aplicação. O primeiro passo a ser feito é criarmos um arquivo chamado <strong>dockerfile</strong>. Dentro desse dockerfile colocaremos alguns parametros para que a imagem seja criada. Então ele será o responsável em tirar a aplicação e criar uma imagem dela. A criação dessa imagem é de acordo com o que está dentro do <strong>dockerfile</strong>, basicamente ele que irá coordenar como que essa aplicação se tornará uma imagem. </p>
            <p> Dito isto sabemos que o dockerfile configura a criacao da imagem, mas o que estará nessa imagem ? Nela teremos algumas coisas como um pedaço do OS, Ambiente (Node por ex), Files(Arquivos da app, tudo que está dentro do back, fornt, db), Como criamos em node, provavelmente teremos bibliotecas, variáveis. Em resumo, criamos uma cópia perfeita com todas as dependencias que nossa aplicacao precisa para ser posta dentro do container.  </p>
            <img src="../dockerPhotos/d4.png" alt="">
            <h3>O que é Docker Hub ?</h3>
            <p> Funciona igual o git/gitub só que para Docker. Imagine que tenhamos uma apliçacão já dockerizada em nosas máquina local, e gostaríamos de enviala para o servidor de producao. Esse processo até pode ser feito diretamente, mas nao é convencional.Entao como é feito? Nós pegamos a nossa imagem, enviamos para o nosso <strong>Docker Hub</strong> e de lá ela é enviada para o Servidor de Producao. E qual a maior vantagem ?  Caso acoçteca algo com nossa maquina física, nossa imagem estará salva dentro do DockerHub. </p>
            <img src="../dockerPhotos/d6.png" alt="">
            <h3>Criado a primeira Imagem:</h3>
            <p> Para criarmos uma primeira imagem para entender como funciona, o primeiro passo é criarmos uma aplicacao da mais simples possivel. Crie uma pasta, e dentro dela uma rquivo chamado <strong>docker.js</strong>, e dentro dele coloque uma linha: console.log('Ola Mundo'). Pronto, temos nossa aplicacao criada. Fora dela, crie outro arquivo chamado de <strong>Dockerfile</strong> que como estudamos acima, é onde iremos configurar a imagem a ser gerada. </p>
            <img src="../dockerPhotos/d7.png" alt="">
            <p> Dessa forma já temos as configuracoes prontas, e em seguida basta darmos o comando para o docker criar uma imagem baseada nesse arquivo. O primeiro passo para darmos o comando é estarmos na mesma camada e no mesmo diretório onde está o arquivo dockerfile. Em seguida podemos roadr o seguinte comando: <strong>docker build -t hi-docker(nomedaImagem) .</strong> Caso voce tenha instalado o <strong>DockerDesktop</strong> através da interface poderemos ver nossa imagem criada, mas também poderemos verificar através do comando <strong>docker images</strong>.</p>
            <p> Agora que já temos nossa aplação e ela foi convertida na nossa imagem docker, já podemos rodar a aplicacao, e assim será criada o container. Para isso voltamos ao terminal, e pedimos para ele rodar essa imagem com o comando: <strong>docker run nomeDaImagem</strong> e provavelmente ele irá nos retornar uma mensagem <strong>Ola Mundo</strong> <small>mensagem posta dentro do console.log</small> caso tenha dado tudo certo. A partir desse momento já temos nosso container rodando, com nossa imagem lá dentro.  </p>
            <hr>
                <p><strong><a href="./linux.html" target="_blank">Aqui sugerimos ir para o Curso basico de Linux Para depois Continuar em Docker.</a></strong></p>
            <hr>
            <p> A partir daqui aprenderemos a trabalhar com o Docker em si. Começaremos nos aprofundando em o que sao <strong>Images & Containers</strong>. O que é uma <strong>Imagem ?</strong> Uma imagem é o que nós chamaos de <strong>cut-down OS</strong>. Dentro de uma imagem temos um sistema operacional, suas bibliotecas, os arquivos da aplicacao(tudo que ela precisa para funcionar), e por último todas as variáveis de ambiente(EnviromentVariables). Em resumo, uma imagem contém tudo o que é necessário para uma aplicacao funcionar. Caso tenhamos em nosso computador uma imagem com a aplicacao rodando, consegiumos transferir essa imagem para outro pc sem problema algum. Já por outro lado, os <strong>Containers</strong> possuem uma outra funcao, é um ambiente isolado. O Container pode ser iniciado e pode ser pausado <strong>(start/stop)</strong> e isso pode ser feito através do terminal ou do dockersOFT. O container é um <strong>Processo</strong>  que roda dentro de uma máquina. Quando temos nossa imagem pronta, criamos um container e esse container é um processo que roda e carrega a imagem. <strong>Exemplo: </strong> </p>
            <img src="../dockerPhotos/d8.png" alt="">
            <p> Dando continuidade, falaremos um pouco da aplicacao. A partir adqui o objetivo é criar uma aplicacao, converter em imagem, gerar um container a partir da imagem  e em seguida roda-la em nossa maquina local. </p><br>
            <h2 id="img">Imagem Docker</h2>
            <p> A partir daqui aprenderemos todo o passo a passo para configurarmos e criarmos uma <strong>Imagem</strong> dentro do docker. Como já vimos anteriormente, para comecar precisamos de um arquivo chamado <strong>Dockerfile</strong>, entao comecaremos aprendendo a como configura-lo. Quando criamos um <strong>Dockerfile</strong> a primeira coisa que precisamos especificar é o <strong>FROM</strong> que é qual imagem ele irá carregar, e também qual a plataforma (Node,Python, etc).  Logo em seguida precisamos especificar a <strong>Workdir</strong> que é basicamente: imagine que nossa aplicacao esteja dentro do diretorio app. Entao, poderemos ali colocar /APP para que ele já entenda que trabalhará a partir dali, nos poupando de em qualquer comando ficar digitando na mao o /app. Logo em segguida temos o <strong>Copy / Add </strong> que servem para copiar ou adicionar todos os arquivos que fazem parte da aplicacao dentro da nossa imagem. É aqui que enviamos tudo que for necessário e que estiver no diretório local para a imagem. Em seguida temos o <strong>RUN</strong> que serve para rodar a aplicacao ou rodar o processo, serve para colocar em funcionamento. Também temos o <strong>ENV</strong> que sao as configuracoes de ambiente, que em oturas palavras é : o que que eu preciso dentro do linux para rodar essa aplicacao. Também temos o <strong>Expose</strong> que é o responsavel por colocar a porta em que a aplicacao irá rodar. Também se for necessário podemos informar o <strong>USER</strong> que é qual usuário irá executar essa aplicacao. Depois que a aplicacao estiver rodando, as vezes precisaremos rodar alguns comandos através do <strong>CMD ou EntryPoint</strong>. Esse é basicamente tudo que precisaremos entender para trabalhar com Docker. Basicamente de início parece "complicado", mas rapidamente nos aprofundamos. <strong>Abaixo o RESUMO:</strong>   </p><br>
            <p><strong><a href="#from">FROM:</a> </strong> Qual imagem(Ubuntu,Apache) e qual Plataforma(Node,Pyth)</p>
            <p><strong> Workdir</strong> Diretório inicial da qual partiremos os comandos.</p>
            <p><strong><a href="#cai">Copy/Add</a></strong> Adicionar & Copiar tudo o que for para dentro da imagem.</p>
            <p><strong><a href="#run"> RUN </a></strong> Rodar o processo/aplicacao.</p>     
            <p><strong>Env</strong> Tudo que o linux precisará para rodar a aplicacao.</p>  
            <p><strong>Expose</strong> Define em qual porta irá subir</p>
            <p><strong> User </strong> Qual usuário poderá acessar</p>
            <p><strong>CMD/EntryPoint</strong> Executar comandos após aplicacao estiver rodando</p>
            <p><strong> </strong></p><br/>     
            <h3 id="from">Escolhendo a imagem: </h3>
            <p> Antes de escolher a imagem precisamos ir na raiz da nossa aplicacao e nele criarmos nosso arquivo <strong>Dockerfile</strong>. O próximo passo, é analisarmos qual o sistema que nossa aplicacao está rodando (node?). Depois de ver isso, precisamos nos certificar qual versao do node foi desenvolvida a aplicacao. Após saber isso, podemos ir no site <a href="https://hub.docker.com/" target="_blank">DockerHub</a> e selecionar a imagem do <strong>NODE</strong>. Em seguida, podemos clicar em Tag, e procurar pela versao do node que desejamos. Ele irá apresentar diversas opcoes. Quanto menor, mais estavel e mais compativel for, melhor. Em seguida basta copiarmos o nome, ex: <strong>12-apine3.14</strong> e colocarmos dentro do nosso <strong>FROM</strong> no DockerFile.</p><br>
            <h3 id="cai">Copiando Arquivos p/ Imagem:</h3>
            <p> Após termos nossa imagem devidamente configurada através do FROM, o próximo passo é copiar os arquivos da aplicacao pra dentro da imagem. Ou seja, instruir o dockerfile através do Copy. Utilizando o <strong>COPY </strong> iremos copiar todos os arquivos incluindo pastas e subpastas para o diretório App por ex. Porém, e se precisarmos copiar um arquivo externo ? Como na internet por ex? nesse caso utilizaremos o <strong>ADD</strong> . Também utilizamos o ADD quando queremos copiar arquivos compactados, e ele automaticamente já irá descompactar o arquivo dentro do diretório em questao. Em resumo, se for uma cópia simples usamos o Copy, se for algo de um site, ou zipado, utilizamos o ADD. </p>
            <img src="../dockerPhotos/d9.png" alt="">
            <h3 id="run"> Utilizando o RUN: </h3>
            <p> Aqui iremos instalar todas as dependencias que a nossa aplicacao precisa para funcionar normalmente. Todas as dependencias precisam estar funcionando antes do usuário tentar executar o processo. No <strong>ALPINE</strong> </p><br>
            <h3> Env - Enviroment</h3>
            <p> Muitas vezes precisaremos</p><br>
            <h3>Expose</h3>
            <p> Quando estamos rodando um container dentro do nosso PC com uma aplicacao web, e em seguida abrimos o browser para acessar a aplicacao do container, precisamos em algum lugar setar qual porta do container estará aberta. No caso, setaremos dentro do <strong>EXPOSE</strong>. </p><br>
            <h3>CMD</h3>
            <p> É a partir daqui que configuramos que ele execute a aplicaao, geralmente dentro da pasta SRC, com o comando. Porém precisamos passar essa informacao no formato do CMD. precisamos entender que o <strong>RUN</strong> é executada enquanto a imagem está sendo construída, já o <strong>CMD</strong> é executada após o a imagem estar construida. </p>
            <img src="../dockerPhotos/d10.png" alt="">
            <h3>User</h3>
            <p> Utilizar os comandos dentro de umc ontainer através do ROOT é uma grave falha de seguranca, por isso o ideal é criarmos um usuario e um grupo para subir e utiliza-lo no container.</p>
            <img src="../dockerPhotos/d11.png" alt="">
            <h3> Rodando a Aplicacao </h3>
            <p> Nosso container através do EXPOSED está escutando na porta 3000, porem precisamos informar ao Mac que a porta 3000 do container está mapeada com a porta 30000 do container. Para isso construimos a imagem normalmente, e em seguida executamos mapeando a porta com o comando: <strong>docker run -dp 3000:3000 nomeDaImagem</strong>. Pronto. Nossa aplicacao estará rodando.</p><br>
            <h3> Otimizando a Performance: </h3>
            <img src="../dockerPhotos/d12.png" alt="">
            <h3>Tags em Imagens :</h3>
            <p>Conforme vamos evoluindo e alterando o sistema, teremos provavelmente diversas imagens da mesma aplicacao, porém com versoes diferentes. Quando executamos o comando <strong>docker Image</strong> podemos listar as imagens e a sua respectiva tag. Utilizando o comando <strong>docker build -t app:nomeDaTag</strong> podemos criar uma nova tag. Porém quando damos denovo o <strong>docker images</strong> perceberemos que a latest nao será excluida, na verdade nao atualiuizamos, e sim criamos outra. Para alterar, colocamos <strong>docker image tag app:nomeDaTagAtual app:NomeDaNovaTag</strong>. </p><br>
            <h3> Compartilhando Imagens :</h3>
            <p> Chegou a hora de compartilhar a nossa imagem, fazer um backup da imagem, ou até mesmo apenas fazer o upload. Uma vez que ela estiver no dockerhub, podemos fazer o download dela em qualquer outra máquina. Para isso, precisamos primeiro ir no <a href="https://hub.docker.com/" target="_blank"> DockerHub </a> e em seguida poderemos criar repositórios, públicos ou privados. Em seguida voltamos ao nosso terminal e listamos nossas imagens, e pegamos a versao mais atual (através da TAG). Agora adiconaremos uma nova tag que é igual ao seu repositorio criado. por ex: guittgui/app . Para isso colocamos o comando: <strong>docker image tag IMAGEID guittgui/app:v1</strong> pronto, agora temos a versao 1 renomeada. Agora já estamos prontos para fazer o upload, e para isso primeiro realizamos nosso login: <strong>docker login</strong> e em seguida pro upload colocamos o comando: <strong>docker push nomeDoRepositorio:TAG. </strong>. A partir desse momento já podemos conferir no nosso repositório no dockerHub.</p><br>
            <h3> Salvando e Carregando Imagens: </h3>
            
            
            <hr>
            <h2>Container Docker</h2>

        </div>




    <script src="./script.js"></script>
</body>
</html>